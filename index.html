<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Repositorio Universitario</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="icon" type="image/png" href="img/icon.png">
</head>
<body>

<!-- ğŸ” Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="img/nuevo.PNG" alt="UPLA Logo" width="40" height="40" class="me-2">
      Steven PeÃ±a SÃ¡nchez
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="menu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link active" href="#">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="#cursos">Cursos</a></li>
        <li class="nav-item"><a class="nav-link" href="">Ciclos</a></li>
        <li class="nav-item"><a class="nav-link" href="sobremi.html">Sobre Mi</a></li>
        <li class="nav-item"><a class="nav-link" href="upload.html">Panel Admin</a></li>
        <!-- ğŸ”¹ BotÃ³n dinÃ¡mico -->
        <li class="nav-item">
          <button id="adminBtn" class="btn btn-success ms-2">Iniciar SesiÃ³n</button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- ğŸ¯ Hero -->
<section class="hero text-center bg-gradient-to-r from-blue-200 to-indigo-300 py-16 px-4 rounded-xl shadow-lg">
  <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">Bienvenid@ a mi Portafolio Universitario ğŸ“šâœ¨</h1>
  <p class="text-lg md:text-xl text-gray-700 mb-3">
    AquÃ­ organizo todos mis cursos, apuntes, proyectos y recursos acadÃ©micos para que puedas aprender, repasar y seguir mi progreso acadÃ©mico de manera ordenada.
  </p>
  <p class="text-lg md:text-xl text-gray-700 mb-3">
    Busca y Selecciona un Ciclo y un Curso para explorar los archivos disponibles. Haz clic en <strong>â€œVerâ€</strong> para previsualizar o en <strong>â€œDescargarâ€</strong> para guardarlos en tu equipo. ğŸ’»ğŸš€
  </p>
  <p class="italic text-gray-800 mb-4">â€œA veces, las mÃ¡quinas pueden hacer cosas que nunca imaginamos.â€ â€“ Alan Turing</p>
  <p class="text-lg text-gray-700 font-medium">Â¡Explora, aprende y potencia tu aprendizaje! ğŸŒ±</p>
</section>

<!-- ğŸ“˜ Lista de Cursos con React -->
<section id="cursos">
  <div id="root"></div>
</section>

<!-- âœ… Footer -->
<footer id="contacto">
  <p>ğŸ“§ Contacto: r01110g@ms.upla.edu.pe</p>
  <p>Â© 2025 Steven â€“ Repositorio Universitario</p>
</footer>

<!-- Scripts Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- React y Babel -->
<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- Supabase -->
<script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

  const SUPABASE_URL = "https://bkmrymsbcnqrxltsmxxm.supabase.co";
  const SUPABASE_ANON_KEY =
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJrbXJ5bXNiY25xcnhsdHNteHhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxNzM2MTksImV4cCI6MjA3Mzc0OTYxOX0.Z4puY5w_Gb7GbbpipawQQ755MKsJcJUeyra7-XnL5as";

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  const adminBtn = document.getElementById("adminBtn");

  async function checkUser() {
    const { data: { user } } = await supabase.auth.getUser();

    if (user) {
      // âœ… Usuario autenticado
      const { data: profile, error } = await supabase
        .from("profiles")
        .select("role")
        .eq("id", user.id)
        .single();

      if (error) {
        console.error("Error obteniendo perfil:", error.message);
      }

      adminBtn.textContent = "Cerrar sesiÃ³n";
      adminBtn.classList.replace("btn-success", "btn-danger");

      adminBtn.onclick = async () => {
        await supabase.auth.signOut();
        location.reload();
      };

      // ğŸ”’ Control de acceso al panel admin


    } else {
      // ğŸšª Usuario no autenticado
      adminBtn.textContent = "Iniciar SesiÃ³n";
      adminBtn.classList.replace("btn-danger", "btn-success");
      adminBtn.onclick = () => window.location.href = "login.html";

      // Ocultar acceso al panel admin
      const panelLink = document.querySelector('a[href="upload.html"]');
      panelLink.style.display = "none";
    }
  }

  checkUser();
</script>


<!-- App React -->
<script type="text/babel">
  const cursos = [
    { img: "https://img.icons8.com/color/96/blueprint.png", nombre: "ğŸ›ï¸ Arquitectura de Software", desc: "DiseÃ±o y principios fundamentales de arquitectura de software.", link: "cursos/arqui.html?curso=arquitectura" },
    { img: "https://img.icons8.com/color/96/law.png", nombre: "âš–ï¸ LegislaciÃ³n InformÃ¡tica", desc: "Normas y leyes aplicadas al Ã¡mbito tecnolÃ³gico.", link: "cursos/legislacion.html?curso=legislacion" },
    { img: "https://img.icons8.com/color/96/usa.png", nombre: "InglÃ©s IV", desc: "Material de inglÃ©s avanzado aplicado al entorno profesional.", link: "cursos/inglesvi.html?curso=ingles" },
    { img: "https://img.icons8.com/color/96/document.png", nombre: "ğŸ“‘ Taller de InvestigaciÃ³n 1", desc: "Documentos y avances en investigaciÃ³n acadÃ©mica.", link: "cursos/tesis.html?curso=investigacion" },
    { img: "https://img.icons8.com/color/96/online-store.png", nombre: "ğŸ›’ Comercio ElectrÃ³nico", desc: "Estrategias y prÃ¡cticas de comercio digital.", link: "cursos/comercio.html?curso=comercio" },
    { img: "https://img.icons8.com/color/96/organization.png", nombre: "ğŸ›ï¸ Gobierno de TI", desc: "GestiÃ³n y control estratÃ©gico de tecnologÃ­as de informaciÃ³n.", link: "cursos/gobiernoti.html?curso=gobierno" },
    { img: "https://img.icons8.com/color/96/artificial-intelligence.png", nombre: "ğŸ¤– Machine Learning (Electivo)", desc: "Algoritmos de aprendizaje automÃ¡tico y aplicaciones.", link: "cursos/marchine.html?curso=ml" },
    { img: "https://img.icons8.com/color/96/cyber-security.png", nombre: "ğŸ”’ Seguridad de la Infraestructura de TI 1", desc: "ProtecciÃ³n y defensa de infraestructuras tecnolÃ³gicas.", link: "cursos/seguridad.html?curso=seguridad" }
  ];

  function App() {
    return (
      <div className="contenedor">
        <h2 className="text-center mb-5 fw-bold text-light">Mis Cursos</h2>
        {cursos.map((curso, i) => (
          <div key={i} className="curso">
            <img src={curso.img} alt="curso"/>
            <div className="curso-info">
              <h3>{curso.nombre}</h3>
              <p>{curso.desc}</p>
            </div>
            <button className="btn-custom" onClick={() => window.location.href = curso.link}>Ver archivos</button>
          </div>
        ))}
      </div>
    );
  }

  const root = ReactDOM.createRoot(document.getElementById('root'));
  root.render(<App />);
</script>

</body>
</html>
